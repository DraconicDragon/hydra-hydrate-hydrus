# these seem to be very important if hydrus has a large file collection, particularly over SMB,
# since they can cause mpv to scan the media file's directory for subtitles and so on

autoload-files=no
access-references=no
rescan-external-files=keep-selection

# Some OSes immediately hide the mouse cursor

cursor-autohide=no
cursor-autohide-fs-only

# run in xwayland because otherwise wont work with hydrus embed
gpu-context=x11egl

profile=gpu-hq
gpu-api=vulkan
hwdec=auto
hwdec-codecs=all


# HDR to SDR
tone-mapping=bt.2390 # good HDR to SDR mapping apparently
hdr-compute-peak=yes # better HDR tone-mapping accuracy
dither-depth=auto # applies dithering to avoid banding when reducing bit-depth


## either interpolation or audio pitch correction makes audio delayed by quite a bit but cba to figure out what

###Interpolation (May increase CPU usage)
#interpolation=yes
#video-sync=display-resample
#tscale=box # may switch to linear
#tscale-window=quadric
#tscale-clamp=0.0 # clamps scaling to avoid extreme ringing, 0 should be fine
#tscale-radius=1.025 # radius of scaling filter

#audio-pitch-correction=yes


###Subtitles
alang = 'jpn,jp,ja,eng,en'
slang = 'eng,en,enUS,enm,en-GB,en-US,bn,ben' # enUS for Crunchyroll and enm for honorifics
subs-with-matching-audio=no # Won't ignore subtitles tagged as "Forced"
sub-fix-timing=yes
sub-scale=1
sub-auto=fuzzy
sub-gray=yes # Monochrome subs makes yellow font grey
sub-font='Trebuchet MS'
sub-bold=yes # Set the font to bold.
sub-file-paths=** # This is for fuzzy-dir script to work
#sub-font-size=55 # Set default subtitle size if not specified.


# needed for SVP

input-ipc-server=mpvpipe


# seems to work for audio normalisation, but it needs to scan the whole file and can introduce load/loop CPU lag that hits particularly hard when transitioning media near the end of the current media
# it could also cause system-wide audio silences on Linux
# so, feel free to try this out, but comment it back out if you get weird behaviour

# af=lavfi=[loudnorm=I=-16:TP=-3:LRA=4]

# this is truly dynamic (f value is the number of previous milliseconds it bases its normalisation on) and may work better for you
# af=lavfi=[dynaudnorm=g=3:f=1000:r=0.9:p=0.9:m=10]
